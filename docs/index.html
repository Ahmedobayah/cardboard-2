<html>
<head>
  <title>cardboard 0.14.2</title>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation'>
  <div class='px2'>
    <div class='clearfix flex flex-stretch mxn2'>
      <div class='documentation-sidebar relative top-0 bottom-0 right-0 px2 py2 col-3 sm-show'>
        <div class='font-smaller fixed col-3 top-0 bottom-0 left-0 overflow-auto black bg-cloudy'>
          <a href="/" class="h5 button block button-transparent">cardboard 0.14.2</a>
          <div class='px2'>
              <a
                href='#cardboard'
                class='regular block'>
                <code>Cardboard</code>
              </a>
              <a
                href='#cardboard'
                class='regular block'>
                <code>cardboard</code>
              </a>
                <a
                  href='#cardboard/bboxquery'
                  class='px1 regular block'>
                  <code>.bboxQuery</code>
                </a>
                <a
                  href='#cardboard/calculatedatasetinfo'
                  class='px1 regular block'>
                  <code>.calculateDatasetInfo</code>
                </a>
                <a
                  href='#cardboard/createtable'
                  class='px1 regular block'>
                  <code>.createTable</code>
                </a>
                <a
                  href='#cardboard/del'
                  class='px1 regular block'>
                  <code>.del</code>
                </a>
                <a
                  href='#cardboard/deldataset'
                  class='px1 regular block'>
                  <code>.delDataset</code>
                </a>
                <a
                  href='#cardboard/get'
                  class='px1 regular block'>
                  <code>.get</code>
                </a>
                <a
                  href='#cardboard/getdatasetinfo'
                  class='px1 regular block'>
                  <code>.getDatasetInfo</code>
                </a>
                <a
                  href='#cardboard/list'
                  class='px1 regular block'>
                  <code>.list</code>
                </a>
                <a
                  href='#cardboard/listdatasets'
                  class='px1 regular block'>
                  <code>.listDatasets</code>
                </a>
                <a
                  href='#cardboard/put'
                  class='px1 regular block'>
                  <code>.put</code>
                </a>
              <a
                href='#cardboard-batch'
                class='regular block'>
                <code>cardboard.batch</code>
              </a>
                <a
                  href='#cardboard-batch/put'
                  class='px1 regular block'>
                  <code>.put</code>
                </a>
                <a
                  href='#cardboard-batch/remove'
                  class='px1 regular block'>
                  <code>.remove</code>
                </a>
              <a
                href='#metadata'
                class='regular block'>
                <code>metadata</code>
              </a>
                <a
                  href='#metadata/addfeature'
                  class='px1 regular block'>
                  <code>.addFeature</code>
                </a>
                <a
                  href='#metadata/calculateinfo'
                  class='px1 regular block'>
                  <code>.calculateInfo</code>
                </a>
                <a
                  href='#metadata/deletefeature'
                  class='px1 regular block'>
                  <code>.deleteFeature</code>
                </a>
                <a
                  href='#metadata/getfeatureinfo'
                  class='px1 regular block'>
                  <code>.getFeatureInfo</code>
                </a>
                <a
                  href='#metadata/getinfo'
                  class='px1 regular block'>
                  <code>.getInfo</code>
                </a>
                <a
                  href='#metadata/updatefeature'
                  class='px1 regular block'>
                  <code>.updateFeature</code>
                </a>
              <a
                href='#utils'
                class='regular block'>
                <code>utils</code>
              </a>
                <a
                  href='#utils/resolvefeatures'
                  class='px1 regular block'>
                  <code>.resolveFeatures</code>
                </a>
                <a
                  href='#utils/todatabaserecord'
                  class='px1 regular block'>
                  <code>.toDatabaseRecord</code>
                </a>
          </div>
        </div>
      </div>
      <div class='sm-col  col-9  flex flex-column'>
        <div class='flex-auto full-width'>
          <div class='px1'>
<section id='cardboard'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard'>
      <code>
        Cardboard<span class='gray'>(config, config.table, config.region, config.bucket, config.prefix, [config.dyno], [config.s3])</span>
      </code>
    </a>
  </h3>
  <p>Cardboard client generator</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>config</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a configuration object</p>
</td>
          </tr>
          <tr>
            <td>config.table</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of a DynamoDB table to connect to</p>
</td>
          </tr>
          <tr>
            <td>config.region</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the AWS region containing the DynamoDB table</p>
</td>
          </tr>
          <tr>
            <td>config.bucket</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of an S3 bucket to use</p>
</td>
          </tr>
          <tr>
            <td>config.prefix</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of a folder within the indicated S3 bucket</p>
</td>
          </tr>
          <tr>
            <td>config.dyno</td>
            <td>
              <code>[<code>dyno</code>]</code>
            </td>
            <td><p>a pre-configured <a href="https://github.com/mapbox/dyno">dyno client</a> for connecting to DynamoDB</p>
</td>
          </tr>
          <tr>
            <td>config.s3</td>
            <td>
              <code>[<code>s3</code>]</code>
            </td>
            <td><p>a pre-configured <a href="http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html">S3 client</a></p>
</td>
          </tr>
      </table>
    </p>


      <h4>Returns</h4>
      <code><code><a href="#cardboard">cardboard</a></code></code>
      :
      <span class='force-inline'>
        <p>a cardboard client</p>

      </span>


    <h4>Examples</h4>
<pre><span class="hljs-keyword">var</span> cardboard = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cardboard'</span>)({
  table: <span class="hljs-string">'my-cardboard-table'</span>,
  region: <span class="hljs-string">'us-east-1'</span>,
  bucket: <span class="hljs-string">'my-cardboard-bucket'</span>,
  prefix: <span class="hljs-string">'my-cardboard-prefix'</span>
});</pre><pre><span class="hljs-keyword">var</span> cardboard = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cardboard'</span>)({
  dyno: <span class="hljs-built_in">require</span>(<span class="hljs-string">'dyno'</span>)(dynoConfig),
  bucket: <span class="hljs-string">'my-cardboard-bucket'</span>,
  prefix: <span class="hljs-string">'my-cardboard-prefix'</span>
});</pre>



</section>
<section id='cardboard'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard'>
      <code>
        cardboard<span class='gray'></span>
      </code>
    </a>
  </h3>
  <p>A client configured to interact with a backend cardboard database</p>







      <div class='section-indent'>
<section id='cardboard/bboxquery'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/bboxquery'>
      <code>
        bboxQuery<span class='gray'>(bbox, dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Find GeoJSON features that intersect a bounding box</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>bbox</td>
            <td>
              Array<<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>>
            </td>
            <td><p>the bounding box as <code>[west, south, east, north]</code></p>
</td>
          </tr>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/calculatedatasetinfo'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/calculatedatasetinfo'>
      <code>
        calculateDatasetInfo<span class='gray'>(dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Calculate metadata about a dataset</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/createtable'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/createtable'>
      <code>
        createTable<span class='gray'>([tableName], callback)</span>
      </code>
    </a>
  </h3>
  <p>Create a DynamoDB table with Cardboard's schema</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>tableName</td>
            <td>
              <code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>]</code>
            </td>
            <td><p>the name of the table to create, if not provided, defaults to the tablename defined in client configuration.</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>




    <h4>Examples</h4>
<pre><span class="hljs-comment">// Create the cardboard table specified by the client config</span>
cardboard.createTable(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
});</pre><pre><span class="hljs-comment">// Create the another cardboard table</span>
cardboard.createTable(<span class="hljs-string">'new-cardboard-table'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
});</pre>



</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/del'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/del'>
      <code>
        del<span class='gray'>(primary, dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Remove a single GeoJSON feature</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>primary</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the id for a feature</p>
</td>
          </tr>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset that this feature belongs to</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>




    <h4>Examples</h4>
<pre><span class="hljs-comment">// Create a point, then delete it</span>
<span class="hljs-keyword">var</span> feature = {
  id: <span class="hljs-string">'my-custom-id'</span>,
  type: <span class="hljs-string">'Feature'</span>,
  properties: {},
  geometry: {
    type: <span class="hljs-string">'Point'</span>,
    coordinates: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>]
  }
};

cardboard.put(feature, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

  cardboard.del(result.id, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    !!result; <span class="hljs-comment">// true: the feature was removed</span>
  });
});</pre><pre><span class="hljs-comment">// Attempt to delete a feature that does not exist</span>
cardboard.del(<span class="hljs-string">'non-existent-feature'</span>, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
  err.message === <span class="hljs-string">'Feature does not exist'</span>; <span class="hljs-comment">// true</span>
  !!result; <span class="hljs-comment">// false: nothing was removed</span>
});</pre>



</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/deldataset'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/deldataset'>
      <code>
        delDataset<span class='gray'>(dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Remove an entire dataset</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/get'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/get'>
      <code>
        get<span class='gray'>(primary, dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Retreive a single GeoJSON feature</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>primary</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the id for a feature</p>
</td>
          </tr>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset that this feature belongs to</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>




    <h4>Examples</h4>
<pre><span class="hljs-comment">// Create a point, then retrieve it.</span>
<span class="hljs-keyword">var</span> feature = {
  type: <span class="hljs-string">'Feature'</span>,
  properties: {},
  geometry: {
    type: <span class="hljs-string">'Point'</span>,
    coordinates: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>]
  }
};

cardboard.put(feature, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  result.geometry.coordinates = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>];

  cardboard.get(result.id, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, final</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    final === result; <span class="hljs-comment">// true: the feature was retrieved</span>
  });
});</pre><pre><span class="hljs-comment">// Attempt to retrieve a feature that does not exist</span>
cardboard.get(<span class="hljs-string">'non-existent-feature'</span>, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
  err.message === <span class="hljs-string">'Feature non-existent-feature does not exist'</span>; <span class="hljs-comment">// true</span>
  !!result; <span class="hljs-comment">// false: nothing was removed</span>
});</pre>



</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/getdatasetinfo'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/getdatasetinfo'>
      <code>
        getDatasetInfo<span class='gray'>(dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Get cached metadata about a dataset</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/list'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/list'>
      <code>
        list<span class='gray'>(dataset, [pageOptions], [pageOptions.start], [pageOptions.maxFeatures], callback)</span>
      </code>
    </a>
  </h3>
  <p>List the GeoJSON features that belong to a particular dataset</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset</p>
</td>
          </tr>
          <tr>
            <td>pageOptions</td>
            <td>
              <code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>]</code>
            </td>
            <td><p>pagination options</p>
</td>
          </tr>
          <tr>
            <td>pageOptions.start</td>
            <td>
              <code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>]</code>
            </td>
            <td><p>start reading features past the provided id</p>
</td>
          </tr>
          <tr>
            <td>pageOptions.maxFeatures</td>
            <td>
              <code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>]</code>
            </td>
            <td><p>maximum number of features to return</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>




    <h4>Examples</h4>
<pre><span class="hljs-comment">// List all the features in a dataset</span>
cardboard.list(<span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, collection</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  collection.type === <span class="hljs-string">'FeatureCollection'</span>; <span class="hljs-comment">// true</span>
});</pre><pre><span class="hljs-comment">// Stream all the features in a dataset</span>
cardboard.list(<span class="hljs-string">'my-dataset'</span>)
  .on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">feature</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Got feature: %j'</span>, feature);
  })
  .on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'All done!'</span>);
  });</pre><pre><span class="hljs-comment">// List one page with a max of 10 features from a dataset</span>
cardboard.list(<span class="hljs-string">'my-dataset'</span>, { maxFeatures: <span class="hljs-number">10</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, collection</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  collection.type === <span class="hljs-string">'FeatureCollection'</span>; <span class="hljs-comment">// true</span>
  collection.features.length &lt;= <span class="hljs-number">10</span>; <span class="hljs-comment">// true</span>
});</pre><pre><span class="hljs-comment">// Paginate through all the features in a dataset</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">list</span>(<span class="hljs-params">startAfter</span>) </span>{
  <span class="hljs-keyword">var</span> options = { maxFeatures: <span class="hljs-number">10</span> };
  <span class="hljs-keyword">if</span> (startAfter) options.start = startFrom;
  cardabord.list(<span class="hljs-string">'my-dataset'</span>, options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, collection</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    <span class="hljs-keyword">if</span> (!collection.features.length) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'All done!'</span>);

    <span class="hljs-keyword">var</span> lastId = collection.features.slice(-<span class="hljs-number">1</span>)[<span class="hljs-number">0</span>].id;
    list(lastId);
  });
})();</pre>



</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/listdatasets'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/listdatasets'>
      <code>
        listDatasets<span class='gray'>(callback)</span>
      </code>
    </a>
  </h3>
  <p>List datasets available in this database</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='cardboard/put'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard/put'>
      <code>
        put<span class='gray'>(feature, dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Insert or update a single GeoJSON feature</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>feature</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON feature</p>
</td>
          </tr>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset that this feature belongs to</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>




    <h4>Examples</h4>
<pre><span class="hljs-comment">// Create a point, allowing Cardboard to assign it an id.</span>
<span class="hljs-keyword">var</span> feature = {
  type: <span class="hljs-string">'Feature'</span>,
  properties: {},
  geometry: {
    type: <span class="hljs-string">'Point'</span>,
    coordinates: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>]
  }
};

cardboard.put(feature, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  !!result.id; <span class="hljs-comment">// true: an id has been assigned</span>
});</pre><pre><span class="hljs-comment">// Create a point, using a custom id.</span>
<span class="hljs-keyword">var</span> feature = {
  id: <span class="hljs-string">'my-custom-id'</span>,
  type: <span class="hljs-string">'Feature'</span>,
  properties: {},
  geometry: {
    type: <span class="hljs-string">'Point'</span>,
    coordinates: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>]
  }
};

cardboard.put(feature, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  result.id === feature.id; <span class="hljs-comment">// true: the custom id was preserved</span>
});</pre><pre><span class="hljs-comment">// Create a point, then move it.</span>
<span class="hljs-keyword">var</span> feature = {
  type: <span class="hljs-string">'Feature'</span>,
  properties: {},
  geometry: {
    type: <span class="hljs-string">'Point'</span>,
    coordinates: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>]
  }
};

cardboard.put(feature, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  result.geometry.coordinates = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>];

  cardboard.put(result, <span class="hljs-string">'my-dataset'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, final</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    final.geometry.coordinates[<span class="hljs-number">0</span>] === <span class="hljs-number">1</span>; <span class="hljs-comment">// true: the feature was moved</span>
  });
});</pre>



</section>
      </div>


</section>
<section id='cardboard-batch'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard-batch'>
      <code>
        cardboard.batch<span class='gray'></span>
      </code>
    </a>
  </h3>
  <p>A module for batch requests</p>







      <div class='section-indent'>
<section id='cardboard-batch/put'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard-batch/put'>
      <code>
        put<span class='gray'>(collection, dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Insert or update a set of GeoJSON features</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>collection</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON FeatureCollection containing features to insert and/or update</p>
</td>
          </tr>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset that these features belongs to</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='cardboard-batch/remove'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#cardboard-batch/remove'>
      <code>
        remove<span class='gray'>(ids, dataset, callback)</span>
      </code>
    </a>
  </h3>
  <p>Remove a set of features</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>ids</td>
            <td>
              Array<<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>>
            </td>
            <td><p>an array of feature ids to remove</p>
</td>
          </tr>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset that these features belong to</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>the callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>


</section>
<section id='metadata'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#metadata'>
      <code>
        metadata<span class='gray'></span>
      </code>
    </a>
  </h3>
  <p>A client for interacting with the metadata for a dataset</p>







      <div class='section-indent'>
<section id='metadata/addfeature'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#metadata/addfeature'>
      <code>
        addFeature<span class='gray'>(feature, callback)</span>
      </code>
    </a>
  </h3>
  <p>Given a GeoJSON feature, perform all required metadata updates. This operation <strong>will</strong> create a metadata record if one does not exist.</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>feature</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON feature being added to the dataset</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>a function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='metadata/calculateinfo'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#metadata/calculateinfo'>
      <code>
        calculateInfo<span class='gray'>(callback)</span>
      </code>
    </a>
  </h3>
  <p>Find all features in a dataset and bring metadata record up-to-date</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>a function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='metadata/deletefeature'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#metadata/deletefeature'>
      <code>
        deleteFeature<span class='gray'>(feature, callback)</span>
      </code>
    </a>
  </h3>
  <p>Given a GeoJSON feature to remove, perform all required metadata updates. This operation <strong>will not</strong> create a metadata record if one does not exist. This operation <strong>will not</strong> shrink metadata bounds.</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>feature</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON feature to remove from the dataset</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>a function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='metadata/getfeatureinfo'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#metadata/getfeatureinfo'>
      <code>
        getFeatureInfo<span class='gray'>(feature)</span>
      </code>
    </a>
  </h3>
  <p>Return the details for a given GeoJSON feature</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>feature</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON feature</p>
</td>
          </tr>
      </table>
    </p>


      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code></code>
      :
      <span class='force-inline'>
        <p>an object describing the feature's size and extent</p>

      </span>





</section>
      </div>
      <div class='section-indent'>
<section id='metadata/getinfo'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#metadata/getinfo'>
      <code>
        getInfo<span class='gray'>(callback)</span>
      </code>
    </a>
  </h3>
  <p>Return dataset metadata or an empty object</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>a callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='metadata/updatefeature'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#metadata/updatefeature'>
      <code>
        updateFeature<span class='gray'>(from, to, callback)</span>
      </code>
    </a>
  </h3>
  <p>Given before and after states of a GeoJSON feature, perform all required metadata adjustments. This operation <strong>will not</strong> create a metadata record if one does not exist.</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>from</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON feature representing the state of the feature <em>before</em> the update</p>
</td>
          </tr>
          <tr>
            <td>to</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON feature representing the state of the feature <em>after</em> the update</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>a function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>


</section>
<section id='utils'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#utils'>
      <code>
        utils<span class='gray'></span>
      </code>
    </a>
  </h3>
  <p>A module containing internal utility functions</p>







      <div class='section-indent'>
<section id='utils/resolvefeatures'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#utils/resolvefeatures'>
      <code>
        resolveFeatures<span class='gray'>(dynamoRecords, callback)</span>
      </code>
    </a>
  </h3>
  <p>Convert a set of backend records into a GeoJSON features</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>dynamoRecords</td>
            <td>
              Array<<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>>
            </td>
            <td><p>an array of items returned from DynamoDB in simplified JSON format</p>
</td>
          </tr>
          <tr>
            <td>callback</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>
            </td>
            <td><p>a callback function to handle the response</p>
</td>
          </tr>
      </table>
    </p>







</section>
      </div>
      <div class='section-indent'>
<section id='utils/todatabaserecord'class='mt2 mb2 py1 px2 keyline-top'>
  <h3 class='regular'>
    <a class='black' href='#utils/todatabaserecord'>
      <code>
        toDatabaseRecord<span class='gray'>(feature, dataset)</span>
      </code>
    </a>
  </h3>
  <p>Converts a single GeoJSON feature into backend format</p>


    <p>
      <table class='table-light overflow-hidden bg-cloudy-light'>
        <thead>
          <th class='col-3'>parameter</th>
          <th class='col-3'>type</th>
          <th class='col-6'>description</th>
        </thead>
          <tr>
            <td>feature</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
            </td>
            <td><p>a GeoJSON feature</p>
</td>
          </tr>
          <tr>
            <td>dataset</td>
            <td>
              <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
            </td>
            <td><p>the name of the dataset the feature belongs to</p>
</td>
          </tr>
      </table>
    </p>


      <h4>Returns</h4>
      <code>Array<<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>></code>
      :
      <span class='force-inline'>
        <p>the first element is a DynamoDB record suitable for inserting via <code>dyno.putItem</code>, the second are parameters suitable for uploading via <code>s3.putObject</code>.</p>

      </span>





</section>
      </div>


</section>

          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
